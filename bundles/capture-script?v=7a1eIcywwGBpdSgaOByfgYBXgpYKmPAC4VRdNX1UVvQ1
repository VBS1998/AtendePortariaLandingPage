(function(n){n(window.jQuery,window,document)})(function(n,t){function i(n){n.find(".field-error").text("")}function r(){var i=n("form"),t;i.length>0&&(t=null,n.each(i,function(){t=n(this);t.find("div:first").show();t.find("div.lgpd-field-div").show();t.find('button[type="submit"]').show();t.find("div.loading-box").hide();t.find("div.error-box").hide()}))}function u(){var i=n("form"),t;i.length>0&&(t=null,n.each(i,function(){var i=null,c=[],u=[],s,l,f,o,h;t=n(this);t.prop("action","/capture");t.prop("method","post");t.find('button[type="submit"]').length==0&&t.find("button:first").prop("type","submit");t.find("#mid").length>0?t.find("#mid").val(_machineID):(i=n("<input />"),i.prop({id:"mid",name:"mid",type:"hidden"}),i.val(_machineID),u.push(i.clone()));t.find("#pid").length>0?t.find("#pid").val(_pageID):(i=n("<input />"),i.prop({id:"pid",name:"pid",type:"hidden"}),i.val(_pageID),u.push(i.clone()));s=t.find('input[type="hidden"][name="hdn-dynamic-fields"]');!!s&&s.length>0&&(l=parseInt(s.attr("id").split("-")[3]),t.find("#bid").length>0?t.find("#bid").val(l):(i=n("<input />"),i.prop({id:"bid",name:"bid",type:"hidden"}),i.val(l),u.push(i.clone())),n(s).remove());t.find("#list_id").length>0?t.find("#list_id").val(_machineID):(i=n("<input />"),i.prop({id:"list_id",name:"list_id",type:"hidden"}),i.val(_machineID),u.push(i.clone()));t.find("#provider").length>0?t.find("#provider").val("leadlovers"):(i=n("<input />"),i.prop({id:"provider",name:"provider",type:"hidden"}),i.val("leadlovers"),u.push(i.clone()));t.find(".loading-box").length==0&&(f=n("<img />"),f.prop("src","//paginas.rocks/content/images/spinner.gif"),o=n("<div>"),o.text("aguarde"),i=n("<div>"),i.addClass("loading-box"),i.append(f,o),c.push(i.clone()));t.find(".error-box").length==0&&(f=n("<img />"),f.prop("src","//paginas.rocks/content/images/error-icon.png"),o=n("<div>"),h=n("<button>"),h.prop({type:"button",id:"btn-error"}),h.addClass("btn btn-default"),h.text("Ok"),i=n("<div>"),i.addClass("error-box"),i.append(f,o,h),c.push(i.clone()));u.length>0&&t.prepend(u);c.length>0&&t.append(c);t.find(".error-box > button").on("click",function(){r()});e(t)}))}function f(i){return n.ajax({url:i.prop("action"),method:i.prop("method"),data:i.serialize(),beforeSend:function(){t.scrollTo(0,0);i.find("div:first").hide();i.find("div.lgpd-field-div").hide();i.find('button[type="submit"]').hide();i.find("div.loading-box").show()}})}function e(r){r.on("submit",function(u){var e,o,s;return i(r),e=!0,o=n(this).find('[data-required="true"]'),o.length>0&&(s=null,n(o).each(function(){var u=n(this).prop("tagName").toLowerCase(),i,t;u=="div"&&n(this).hasClass("checkbox-list")?n(this).find('input[type="checkbox"]:checked').length==0&&(i=n(this).parent("div"),n(this).find('input[type="checkbox"]').prop("id")=="LGPDValidation"?i.find(".field-error").html("Esse campo precisa ser confirmado"):i.find(".field-error").html("&nbsp;Selecione ao menos uma opção"),e=!1):n(this).val().trim()===""&&(t=n(this).prop("id"),t!=""&&(t=t.replace("llfield","")),r.find("#llerror"+t).text("Esse campo é obrigatório"),e=!1)})),e&&f(r).done(function(i){if(!i.errors)t.location.href=i;else{var u="";r.find("div.loading-box").hide();n(i.errors).each(function(){!this.field||this.field==""?u+="<br />"+this.error:n(this.field).text(this.error)});u!=""?(r.find("div.error-box>div").html(u),r.find("div.error-box").show()):(r.find("div:first").show(),r.find("div.lgpd-field-div").show(),r.find('button[type="submit"]').show())}}),u.preventDefault(),!1})}n(function(){u()})})